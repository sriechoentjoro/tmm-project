{#
/**
 * Export CSV method template
 */
#}
    /**
     * Export to CSV
     *
     * @return \Cake\Http\Response
     */
    public function exportCsv()
    {
{% set belongsTo = Bake.aliasExtractor(modelObj, 'BelongsTo') %}
{% if belongsTo %}
        $query = $this->{{ currentModelName }}->find('all')
            ->contain([{{ Bake.stringifyList(belongsTo, {'indent': false})|raw }}]);
{% else %}
        $query = $this->{{ currentModelName }}->find('all');
{% endif %}
        
        // Define headers and fields for export
        $headers = ['ID', 'Name', 'Created', 'Modified'];
        $fields = ['id', 'name', 'created', 'modified'];
        
        return $this->doExportCsv($query, '{{ currentModelName }}', $headers, $fields);
    }
